# Работа с Git

С гитом вы можете работать как напрямую из мастер ноды, со своего компьютера или через браузер или через любой удобныей вам UI (SmartGit, GitHub Desktop, ...).
**Предпочтительно работать со своего компьютера. Так у вас получается меньше ненужного мусора залить в общий гит.**
**Все ваши промежуточные рабочие тетради заливать туда не надо...**


## Настройка git

1. Генерация ключа в Linux в bash на мастер ноде
   1. В консоле вводим `ssh-keygen -t rsa -b 4096 -C "email"` заменив email на актуальный
   1. При запросе имени файла нажимаем **Enter** (сохранит автоматически в нужную директорию)
   1. Вводим пароль. желательно не сильно длинный т.к. его нужно будет постоянно вводить.
1. Добавление ключа в профиль GitHub
   1. Авторизуемся на GitHub
   1. Открываем меню по нажатию на аватарку в верхнем равом углу и выбераем пункт **Settings**
   1. Выбираем пункт **SSH and GPG keys**
   1. Нажимаем на **New SSH Key** и копируем содержимое файла id_rsa.pub полученного на первом шаге
1. Добавление ключа на сервер
   1. Копирование на сервер
      1. Через консоль linux: `scp -i ~/.ssh/newprolab.pem ~/.ssh/id_rsa username@spark-master-4.newprolab.com:~/.ssh`
      1. Через консоль Win10: `scp -i c:\users\user\.ssh\newprolab.pem c:\users\user\.ssh\id_rsa username@spark-master-4.newprolab.com:~/.ssh`
      1. Через MobaXTerm: Просто перетащите иконку файла в область проводника
   1. Установка прав на файл `chmod 700 .ssh/id_rsa`

## Консольные команды

Команда | Описание
--------|---------
`git clone git@github.com:newprolab/sber-spark-ds-6.git` | Клонирование репозитория
`git branch branch_name` | создание ветки
`git checkout branch_name` | переключение на ветку
`git add *` | добавить все файлы которые были изменены
`git add file_path1 file_path2 ... file_pathN` | добавить файлы по списку
`git commit` | Коммит (необходимо ввести описание коммита и выйти из vi : **Esc** -> `:qw`)
`git push` | выполняет выгрузку в удаленный репозиторий
`git pull` | выполняет загрузку из удаленного репозитория


## Как работать?

* Перед любым пушем
* Сделать pull/fetch репозитория 
* Скопировать ваш файлик в расположение репо (к себе на компьютер или на мастер ноде)
* Выполнить add новых файлов в индекс гита в раздел **labs/*<user_name>*/lab0*< N >*/**
* Сделать add + commit + push
* Проверить, что все хорошо

## Организация папок

Лабораторные складывать в папку *labs/solutions/<user_name>/lab< N >/*.
* *<user_name>* - ваш логин из личного кабинета
* *< N >* - это номер лабораторной
